<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Acme|Special+Elite" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <title>Citi Bike</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css">
    <!-- Our CSS -->
    <link rel="stylesheet" type="text/css" href="/static/css/app.css">

    <!-- <title>Comuteeze</title> -->

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../static/js/carousel.css" rel="stylesheet">

    <!-- App CSS -->
    <link href="../static/css/app.css" rel="stylesheet">

    <!-- JQuery -->
    <link href="../static/js/jquery.js" rel="stylesheet">

    
  </head>

  <style>
      #graph-navbar {
      padding: 2em;
      background-color: #eee;
      margin-bottom: 2em;
      margin-top: 2em;
      text-decoration-color: black;
      -webkit-text-fill-color: black;
      border-color: black;
    }
    
      #selDataset {
        border-color: black;
        background-color: lightblue;
        text-decoration-color: black;
        
      }
    
      #seltypeDataset {
        border-color: black;
        background-color: lightblue;
        text-decoration-color: black;
        
      }
    
    </style>

  <body>

    <header>
      <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="#">Comuteeze</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="http://127.0.0.1:5000/">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://127.0.0.1:5000/weather">Weather</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://127.0.0.1:5000/map">Map</a>
            </li>
            <li class="nav-item">
               <a class="nav-link" href="http://127.0.0.1:5000/graphs">Uber/Lyft Timecourse</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://127.0.0.1:5000/uber">Uber Pricing</a>
            </li>
          </ul>
          <form class="form-inline mt-2 mt-md-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
    </header>

    <main role="main">

      <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img class="first-slide" src="static/images/map3.png" alt="First slide">
            <div class="container">
              <div class="carousel-caption text-left">
                <div class="d-flex">
                <h1 class="home_head p-3 mb-2 bg-secondary">Commuteeze Uber/Lyft Timecourse Data</h1>
               </div>
                <p class="home_head p-3 mb-2 bg-secondary">Check out our graphs below, it will definitely help you with something, or maybe nothing, but check it out anyways. </p>
                <!-- <p><a class="btn btn-sm btn-primary home_btn" href="#" role="button">Sign up today</a></p> -->
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <img class="second-slide" src="static/images/weatherhead.jpg" alt="Second slide">
            <div class="container">
              <div class="carousel-caption">
                <h1 class="home_head p-3 mb-2 bg-secondary">Commuteeze Weather App</h1>
                <p class="home_head p-3 mb-2 bg-secondary">Check out our Weather Maps, it looks like it may rain.</p>
                <!-- <p><a class="btn btn-lg btn-primary" href="#" role="button">Learn more</a></p> -->
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <img class="third-slide" src="static/images/city2.jpeg" alt="Third slide">
            <div class="container">
              <div class="carousel-caption text-right">
                <h1 class="home_head p-3 mb-2 bg-secondary">Welcome to Commuteeze</h1>
                <p class="home_head p-3 mb-2 bg-secondary">City life can be very stressful. Everybody is always running around like crazy, stuck in traffic jams trying to make meetings, trying to make ends meet, trying to meet deadlines, trying to get kids to and from activities. Commuteeze to the rescue, let us help you find the quickest least stressful way to your next event!! </p>
                <!-- <p><a class="btn btn-lg btn-primary" href="#" role="button">Browse gallery</a></p> -->
              </div>
            </div>
          </div>
        </div>
        <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>







      

        <!-- The div that holds our graphs -->
    <div id="bringthenoise">
      <div class="container">
          <div class="jumbotron text-center">
            <div id="plot-1"></div>
            <p>{{text}}</p>
          </div>
          <div class="col-md-12"></div>
          <div class="col-md-12">
            <nav class="btn btn-primary" id="graph-navbar"><strong>Select Sample<br></strong>
              <select class="btn btn-primary dropdown-toggle center" id="seltypeDataset"></select>
            </nav>
          <!-- </div> -->
          <!-- <div class="col-md-2 col-md-4"> -->
            <nav class="btn btn-primary" id="graph-navbar"><strong>Select Sample<br></strong>
              <select class="btn btn-primary dropdown-toggle center" id="selDataset" onchange="optionChanged(this.value, seltypeDataset.value)"></select>
            </nav>
          </div>
        <div class="col-md-12"></div>
      </div>
    </div>

        <!-- The div that holds our graphs -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.3/d3.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- <script src="plots.js"></script> -->
    <script type="text/javascript">
    
    var $pagebody = document.querySelector("#selDataset");
            $pagebody.innerHTML = "";
    
    var response = [0, 1, 2, 3, 4, 5, 6];
    var translatedresponse = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
    var pickdrop = ["pickups", "dropoffs"];
    var translatedpickdrop = ["Pickup", "Dropoff"];
    for (var i = 0; i < response.length; i++) {
      var selectClick = document.getElementById("selDataset");
      var selectOption = document.createElement("option");
      selectOption.value = response[i];
      selectOption.innerHTML = translatedresponse[i];
      selectClick.append(selectOption);
    }
    for (var i =0; i<pickdrop.length;i++) {
      var selectClick = document.getElementById("seltypeDataset");
      var selectOption = document.createElement("option");
      selectOption.value = pickdrop[i];
      selectOption.innerHTML = translatedpickdrop[i];
      selectClick.append(selectOption);
    }

    function optionChanged(value, anothervalue) {

      var daysURL = "/" + anothervalue + "/" + value;

      console.log(daysURL);
      console.log("wakka wakka " + anothervalue);

      Plotly.d3.json(daysURL, function (error, response) {
        if (error) return console.warn(error);
        console.log("Sample value retrieval", response);
        var xValues = [];
        var yValues = [];
        for (var i=0; i<response.length; i++) {
          xValues.push(response[i].hour);
          if (anothervalue == "dropoffs") {
            yValues.push(response[i].total_dropoffs);
          }
          else {
            yValues.push(response[i].total_pickups);
          }
        }
        console.log(xValues);
        console.log(yValues);

        var trace1 = {
          x: xValues,
          y: yValues,
          type: 'scatter'
        };
        var data = [trace1];

        const layout = { 
          xaxis: {title: "Number of Requests"},
          yaxis: {title: "Time (hours)"}
        };

        Plotly.newPlot('plot-1', data, layout);
      })
    }
    </script>
    

    <!-- FOOTER -->
    <footer class="container">
      <p class="float-right"><a href="#">Back to top</a></p>
      <p>&copy; 2017-2018 Commuteeze, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
    </footer>
  </main>

  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="/static/js/jquery-slim.min.js"><\/script>')</script>
  <script src="/static/js/popper.min.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>   
       
      </body>
    </html>